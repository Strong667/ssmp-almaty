# Структура для Платные услуги

## Текущая ситуация
- Таблица `paid_services` содержит только поле `image`
- В админ-панели можно добавлять только изображения
- На фронтенде отображаются карточки с изображениями

## Новая структура

### Вариант 1: Отдельная таблица для услуг (рекомендуется)

#### Таблица `paid_services`
Основная таблица для коммерческих предложений:
- `id` - ID записи
- `created_at`, `updated_at` - временные метки

#### Таблица `paid_service_items`
Таблица для услуг в коммерческом предложении:
- `id` - ID записи
- `paid_service_id` - внешний ключ на `paid_services`
- `name` - Наименование услуги (string, required)
- `unit` - Ед. изм. (string, required, например: "1 (один) час", "1 (один) вызов")
- `price` - Стоимость (тенге), без учета НДС (decimal(10,2), required)
- `file` - Прикрепленный файл (string, nullable) - может быть изображение, doc, pdf и т.д.
- `order` - Порядок сортировки (integer, default 0)
- `created_at`, `updated_at` - временные метки

#### Модели
- `PaidService` - основная модель с отношением `hasMany(PaidServiceItem::class)`
- `PaidServiceItem` - модель для услуг с отношением `belongsTo(PaidService::class)`

#### MoonShine ресурсы
- `PaidServiceResource` - основной ресурс с полем `HasMany` для услуг
- `PaidServiceItemResource` - ресурс для управления услугами (вложенный)

#### Преимущества:
- ✅ Нормализованная структура БД
- ✅ Легко добавлять/удалять услуги
- ✅ Гибкость в управлении
- ✅ Соответствует паттерну проекта (как Anticorruption + AnticorruptionImage)

---

### Вариант 2: JSON поле (альтернатива)

#### Таблица `paid_services`
- `id` - ID записи
- `items` - JSON поле с массивом услуг:
  ```json
  [
    {
      "name": "Дежурства на мероприятиях (фельдшерская бригада)",
      "unit": "1 (один) час",
      "price": "24953",
      "file": "path/to/file.pdf"
    },
    {
      "name": "Дежурства на мероприятиях (специализированная бригада)",
      "unit": "1 (один) час",
      "price": "28877",
      "file": "path/to/file2.pdf"
    }
  ]
  ```
- `created_at`, `updated_at` - временные метки

#### Преимущества:
- ✅ Одна таблица
- ✅ Проще структура

#### Недостатки:
- ❌ Сложнее работать с данными в запросах
- ❌ Нет нормализации
- ❌ Сложнее валидация

---

## Рекомендация

**Использовать Вариант 1** (отдельная таблица), так как:
1. Соответствует текущей архитектуре проекта (Anticorruption + AnticorruptionImage)
2. Легче работать с данными в запросах
3. Удобнее управлять через MoonShine (HasMany поле)
4. Нормализованная структура БД

## Пример использования

### В админ-панели:
1. Создаем новое коммерческое предложение (PaidService)
2. В форме добавляем услуги через HasMany поле:
   - Наименование: "Дежурства на мероприятиях (фельдшерская бригада – 2 фельдшера)"
   - Ед. изм.: "1 (один) час"
   - Стоимость: "24953"
   - Файл: загружаем PDF/изображение/doc
3. Можно добавить несколько услуг в одном предложении

### На фронтенде:
- Отображаем коммерческие предложения
- Для каждого предложения показываем таблицу с услугами
- Каждая услуга имеет ссылку на файл для скачивания/просмотра

## Вопросы для уточнения

1. Нужно ли название/заголовок для коммерческого предложения? (например, "Коммерческое предложение по дежурству на мероприятиях")
2. Нужна ли дата создания предложения на фронтенде?
3. Как отображать услуги на фронтенде - в виде таблицы как на картинке или в другом формате?
4. Нужна ли возможность группировки услуг по категориям?

